<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flip Clock — Sōma</title>

<style>
:root{
    --bg:#f6f2fb;
    --card:#e7def6;
    --text:#4b4453;
    --label:#9b90a8;
}

body{
    margin:0;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:var(--bg);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}

.container{
    text-align:center;
}

.clock{
    display:flex;
    gap:14px;
}

.unit{
    text-align:center;
}

.flip{
    position:relative;
    width:120px;
    height:140px;
    perspective:1200px;
}

.card{
    position:absolute;
    width:100%;
    height:50%;
    background:var(--card);
    color:var(--text);
    font-size:64px;
    font-weight:600;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    backface-visibility:hidden;
}

.top{
    top:0;
    border-radius:18px 18px 6px 6px;
    border-bottom:1px solid rgba(0,0,0,0.05);
}

.bottom{
    bottom:0;
    border-radius:6px 6px 18px 18px;
    transform:rotateX(180deg);
}

.flip-card{
    position:absolute;
    width:100%;
    height:50%;
    left:0;
    background:var(--card);
    color:var(--text);
    font-size:64px;
    font-weight:600;
    display:flex;
    align-items:center;
    justify-content:center;
    backface-visibility:hidden;
}

.flip-top{
    top:0;
    transform-origin:bottom;
    border-radius:18px 18px 6px 6px;
}

.flip-bottom{
    bottom:0;
    transform-origin:top;
    border-radius:6px 6px 18px 18px;
    transform:rotateX(180deg);
}

.animate-top{
    animation:flipTop .35s ease-in forwards;
}

.animate-bottom{
    animation:flipBottom .35s ease-out .35s forwards;
}

@keyframes flipTop{
    to{ transform:rotateX(-180deg); }
}

@keyframes flipBottom{
    from{ transform:rotateX(180deg); }
    to{ transform:rotateX(0); }
}

.label{
    margin-top:8px;
    font-size:11px;
    letter-spacing:1px;
    color:var(--label);
}

.ampm{
    margin-top:10px;
    font-size:13px;
    color:var(--text);
}

.credit{
    margin-top:18px;
    font-size:11px;
    color:var(--label);
}

.theme-switch{
    margin-top:15px;
}

button{
    border:none;
    padding:6px 10px;
    border-radius:8px;
    margin:3px;
    cursor:pointer;
    font-size:11px;
}
</style>
</head>

<body>

<div class="container">

<div class="clock">
    <div class="unit">
        <div class="flip" id="h"></div>
        <div class="label">HEURES</div>
    </div>

    <div class="unit">
        <div class="flip" id="m"></div>
        <div class="label">MINUTES</div>
    </div>

    <div class="unit">
        <div class="flip" id="s"></div>
        <div class="label">SECONDES</div>
    </div>
</div>

<div class="ampm" id="ampm"></div>

<div class="theme-switch">
    <button onclick="setTheme('lavender')">Lavender</button>
    <button onclick="setTheme('peach')">Peach</button>
    <button onclick="setTheme('mint')">Mint</button>
    <button onclick="setTheme('blue')">Blue</button>
</div>

<div class="credit">Design & widget — Sōma</div>

</div>

<script>
const USE_24H = true;

const themes={
lavender:{bg:"#f6f2fb",card:"#e7def6",text:"#4b4453",label:"#9b90a8"},
peach:{bg:"#fff4ef",card:"#ffe0d6",text:"#5a4742",label:"#b89a92"},
mint:{bg:"#eefaf6",card:"#d7f3ea",text:"#3f5750",label:"#8aa8a0"},
blue:{bg:"#eef3ff",card:"#dbe5ff",text:"#424b63",label:"#8d96b0"}
};

function setTheme(name){
const t=themes[name];
document.documentElement.style.setProperty('--bg',t.bg);
document.documentElement.style.setProperty('--card',t.card);
document.documentElement.style.setProperty('--text',t.text);
document.documentElement.style.setProperty('--label',t.label);
}

function createFlip(el,val){
el.innerHTML=`
<div class="card top">${val}</div>
<div class="card bottom">${val}</div>
`;
}

function animateFlip(el,newVal){
const top=el.querySelector('.top');
const bottom=el.querySelector('.bottom');

const flipTop=document.createElement('div');
flipTop.className='flip-card flip-top';
flipTop.textContent=top.textContent;

const flipBottom=document.createElement('div');
flipBottom.className='flip-card flip-bottom';
flipBottom.textContent=newVal;

el.appendChild(flipTop);
el.appendChild(flipBottom);

flipTop.classList.add('animate-top');
flipBottom.classList.add('animate-bottom');

setTimeout(()=>{
top.textContent=newVal;
bottom.textContent=newVal;
flipTop.remove();
flipBottom.remove();
},700);
}

function update(){
const now=new Date();

let h=now.getHours();
let ampm="";

if(!USE_24H){
ampm=h>=12?"PM":"AM";
h=h%12||12;
}

document.getElementById("ampm").textContent=USE_24H?"":ampm;

const time=[
String(h).padStart(2,'0'),
String(now.getMinutes()).padStart(2,'0'),
String(now.getSeconds()).padStart(2,'0')
];

["h","m","s"].forEach((id,i)=>{
const el=document.getElementById(id);
if(!el.dataset.init){
createFlip(el,time[i]);
el.dataset.init=1;
}else{
const current=el.querySelector('.top').textContent;
if(current!==time[i]) animateFlip(el,time[i]);
}
});
}

setInterval(update,1000);
update();
</script>

</body>
</html>
