<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sōma Book - Dashboard</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;1,400&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { 
            --cover-bg: #E1E3E3; 
            --page-bg: #FDFBF7; /* Teinte papier plus douce */
            --header-table-bg: #E1E3E3; 
            --stat-envoye-bg: #ffffff; 
            --stat-attente-bg: #ffffff; 
            --stat-trouve-bg: #ffffff;
            /* Couleurs onglets latéraux */
            --tab-rose: #E8B1B1; --tab-orange: #F2C38D; --tab-jaune: #F2EB8D;
            --tab-vert: #BAF28D; --tab-bleu: #8DBAF2; --tab-violet: #C5B1E8;
        }
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f0f0f0; overflow-x: hidden; }
        .paper-grid { background-image: radial-gradient(rgba(0,0,0,0.06) 0.8px, transparent 0.8px); background-size: 20px 20px; }
        .paper-lines { background-image: linear-gradient(rgba(0,0,0,0.04) 1px, transparent 1px); background-size: 100% 30px; }
        .grain { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; opacity: 0.04; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"); }
        
        /* --- NAVIGATION LATÉRALE (STYLE PHOTO 3) --- */
        #side-nav { position: fixed; right: -50px; top: 50px; display: flex; flex-direction: column; gap: 4px; z-index: 2000; transition: right 0.8s ease; }
        #side-nav.show { right: 0; }
        .tab { width: 45px; height: 65px; border-radius: 8px 0 0 8px; cursor: pointer; transition: 0.3s; box-shadow: -2px 2px 10px rgba(0,0,0,0.05); }
        .tab:hover { width: 55px; }

        /* --- COUVERTURE SŌMA BOOK (STYLE PHOTO 2) --- */
        #cover { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--cover-bg); z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 80px 20px; box-sizing: border-box; transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: left center; box-shadow: inset -5px 0 10px rgba(0,0,0,0.1), 10px 0 30px rgba(0,0,0,0.2); cursor: pointer; }
        #cover.opened { transform: rotateY(-115deg); pointer-events: none; }
        .registre-title { font-family: 'Playfair Display', serif; font-size: 38px; font-style: italic; letter-spacing: 2px; text-align: center; }
        .turn-page-hint { position: absolute; right: 25px; top: 50%; transform: translateY(-50%); writing-mode: vertical-rl; text-transform: uppercase; font-size: 10px; letter-spacing: 3px; opacity: 0.5; font-weight: 600; }
        
        #main-content { padding: 40px 20px; min-height: 100vh; background-color: var(--page-bg); opacity: 0; transition: opacity 0.5s; }
        .visible { opacity: 1 !important; }
        
        /* STATS ADAPTÉES */
        .stats-container { display: flex; gap: 15px; margin-bottom: 30px; }
        .stat-card { flex: 1; padding: 20px; border-radius: 12px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.05); background-size: cover; background-position: center; position: relative; overflow: hidden; }
        .stat-card span { display: block; font-size: 24px; font-weight: bold; margin-bottom: 5px; position: relative; z-index: 2; }
        .stat-card label { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; opacity: 0.7; position: relative; z-index: 2; }
        
        /* MODALS */
        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px; border-radius: 20px; z-index: 10001; width: 340px; }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.2); z-index: 10000; backdrop-filter: blur(2px); }
        .palette-grid { display: grid; grid-template-columns: repeat(8, 1fr); gap: 8px; }
        .color-dot { width: 32px; height: 32px; border-radius: 50%; cursor: pointer; border: 1px solid #eee; }

        .table-container { background: rgba(255,255,255,0.3); border-radius: 15px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 900px; }
        th { padding: 15px; text-align: left; font-size: 10px; text-transform: uppercase; letter-spacing: 1px; }
        td { padding: 12px 15px; border-bottom: 1px solid rgba(0,0,0,0.05); }
        input, select { border: 1px solid rgba(0,0,0,0.1); background: white; padding: 8px; border-radius: 4px; font-size: 12px; }
        .copyright { text-align: center; font-size: 9px; color: rgba(0,0,0,0.4); margin-top: 60px; letter-spacing: 3px; text-transform: uppercase; }
    </style>
</head>
<body>
    <div class="grain"></div>
    <div id="overlay" onclick="closeModals()"></div>

    <div id="zoneModal" class="modal">
        <p style="font-size: 10px; text-transform: uppercase; letter-spacing: 1px; font-weight: bold;">Personnalisation</p>
        <button onclick="_0x9a3('cover')" style="width:100%; padding:10px; margin-bottom:5px;">Couverture</button>
        <button onclick="_0x9a3('page')" style="width:100%; padding:10px; margin-bottom:5px;">Fond de Page</button>
        <div class="palette-grid" id="paletteGrid"></div>
    </div>

    <div id="side-nav">
        <div class="tab" style="background: var(--tab-rose);" onclick="location.reload()"></div>
        <div class="tab" style="background: var(--tab-orange);"></div>
        <div class="tab" style="background: var(--tab-jaune);"></div>
        <div class="tab" style="background: var(--tab-vert);"></div>
        <div class="tab" style="background: var(--tab-bleu);"></div>
        <div class="tab" style="background: var(--tab-violet);"></div>
    </div>

    <div id="book-wrapper">
        <div id="cover" onclick="_0x1a2()">
            <div class="registre-title">Sōma Book</div>
            <div class="user-info" onclick="event.stopPropagation()">
                <input type="text" id="userName" oninput="_0x7c1()" placeholder="PRÉNOM ET NOM" style="border:none; border-bottom:1.5px solid #000; text-align: center; font-size: 14px; width: 280px; background: transparent; letter-spacing: 2px;">
            </div>
            <div class="turn-page-hint">Tourner la page →</div>
            <div style="font-size: 26px; letter-spacing: 8px; font-weight: 300;">SŌMA</div>
        </div>

        <div id="main-content">
            <div style="display:flex; justify-content: space-between; margin-bottom: 30px;">
                <button onclick="_0x2b3()" style="background:none; border:1px solid #000; padding:8px 18px; cursor:pointer; font-size:10px; text-transform:uppercase; border-radius:25px; font-weight:bold;">Refermer</button>
                <div style="display:flex; gap:10px;">
                    <div onclick="_0x5a1('zoneModal')" style="cursor:pointer; text-align:center;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="1.5"><path d="M12 19l7-7 3 3-7 7-3-3zM18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path></svg></div>
                </div>
            </div>

            <h1 style="font-family: 'Playfair Display', serif; font-style: italic; margin-bottom: 30px;">Bibliothèque & Services Presse</h1>

            <div class="stats-container">
                <div class="stat-card" style="background-color: var(--stat-envoye-bg);"><span id="statLus">0</span><label>Lus</label></div>
                <div class="stat-card" style="background-color: var(--stat-attente-bg);"><span id="statEnCours">0</span><label>En cours</label></div>
                <div class="stat-card" style="background-color: var(--stat-trouve-bg);"><span id="statPAL">0</span><label>Dans la PAL</label></div>
            </div>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Titre du Livre</th>
                            <th>Maison d'édition</th>
                            <th>Réception</th>
                            <th>Deadline Post</th>
                            <th>Statut</th>
                            <th>Réseau</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>

            <button onclick="_0x6f7()" style="margin-top:20px; padding:12px 25px; background:#000; color:#fff; border-radius:30px; cursor:pointer; font-size:10px; font-weight:bold;">+ Ajouter un livre</button>
            <div class="copyright">Sōma Book © 2026</div>
        </div>
    </div>

    <script>
        const _0x1f2 = JSON.parse(localStorage.getItem('somabook_data')) || [];
        const _0xcolors = ["#E1E3E3", "#DFD8D5", "#FDFBF7", "#E6D4C4", "#BAB1B0", "#F2F8F8", "#E8E7E7", "#D5C7B3"];
        
        function _0x7c1(){localStorage.setItem('soma_userName',document.getElementById('userName').value)}
        function _0x1a2(){
            document.getElementById('cover').classList.add('opened');
            document.getElementById('main-content').classList.add('visible');
            document.getElementById('side-nav').classList.add('show');
        }
        function _0x2b3(){
            document.getElementById('cover').classList.remove('opened');
            document.getElementById('main-content').classList.remove('visible');
            document.getElementById('side-nav').classList.remove('show');
        }

        function _0x6f7(){
            _0x1f2.push({titre:"", editeur:"", date:"", deadline:"", statut:"PAL", reseau:"TikTok"});
            _0xrender();
        }

        function _0xrender(){
            const b = document.getElementById('tableBody'); b.innerHTML = "";
            _0x1f2.forEach((c, i) => {
                const r = document.createElement('tr');
                r.innerHTML = `
                    <td><input type="text" value="${c.titre}" oninput="_0xup(${i},'titre',this.value)" placeholder="Titre"></td>
                    <td><input type="text" value="${c.editeur}" oninput="_0xup(${i},'editeur',this.value)" placeholder="Édition"></td>
                    <td><input type="date" value="${c.date}" onchange="_0xup(${i},'date',this.value)"></td>
                    <td><input type="date" value="${c.deadline}" onchange="_0xup(${i},'deadline',this.value)"></td>
                    <td><select onchange="_0xup(${i},'statut',this.value,true)">
                        <option value="PAL" ${c.statut==='PAL'?'selected':''}>Dans la PAL</option>
                        <option value="Lecture" ${c.statut==='Lecture'?'selected':''}>En cours</option>
                        <option value="Lu" ${c.statut==='Lu'?'selected':''}>Terminé</option>
                    </select></td>
                    <td><select onchange="_0xup(${i},'reseau',this.value)">
                        <option value="TikTok" ${c.reseau==='TikTok'?'selected':''}>TikTok</option>
                        <option value="Insta" ${c.reseau==='Insta'?'selected':''}>Instagram</option>
                    </select></td>`;
                b.appendChild(r);
            });
            _0xstats();
        }

        function _0xup(i,k,v,f=false){
            _0x1f2[i][k]=v;
            localStorage.setItem('somabook_data',JSON.stringify(_0x1f2));
            if(f) _0xrender(); else _0xstats();
        }

        function _0xstats(){
            document.getElementById('statLus').innerText = _0x1f2.filter(c=>c.statut==="Lu").length;
            document.getElementById('statEnCours').innerText = _0x1f2.filter(c=>c.statut==="Lecture").length;
            document.getElementById('statPAL').innerText = _0x1f2.filter(c=>c.statut==="PAL").length;
        }

        function _0x5a1(id){document.getElementById(id).style.display='block';document.getElementById('overlay').style.display='block'}
        function closeModals(){document.querySelectorAll('.modal').forEach(m=>m.style.display='none');document.getElementById('overlay').style.display='none'}

        // Init
        const sn = localStorage.getItem('soma_userName'); if(sn) document.getElementById('userName').value=sn;
        _0xrender();
    </script>
</body>
</html>
