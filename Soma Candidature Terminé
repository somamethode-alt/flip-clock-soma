<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>S≈çma - Suivi de candidatures</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="S≈çma">
    <link rel="apple-touch-icon" href="https://i.postimg.cc/8P6mTVYm/SOMA-ICON-LUXE.png">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;1,400&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --cover-bg: #E1E3E3; --page-bg: #E1E3E3; --header-table-bg: #E1E3E3; --stat-envoye-bg: #ffffff; --stat-attente-bg: #ffffff; --stat-trouve-bg: #ffffff; }
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f0f0f0; overflow-x: hidden; }
        .paper-grid { background-image: radial-gradient(rgba(0,0,0,0.1) 0.8px, transparent 0.8px); background-size: 20px 20px; }
        .paper-lines { background-image: linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px); background-size: 100% 30px; }
        .grain { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; opacity: 0.04; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"); }
        #imessage-notif { position: fixed; top: -150px; left: 50%; transform: translateX(-50%); width: 350px; background: linear-gradient(135deg, #ffafbd 0%, #ffc3a0 100%); backdrop-filter: blur(10px); border-radius: 20px; padding: 15px; box-shadow: 0 15px 35px rgba(255, 175, 189, 0.4); z-index: 10002; transition: top 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); display: flex; align-items: center; gap: 12px; border: 1px solid rgba(255,255,255,0.4); cursor: pointer; }
        #imessage-notif.show { top: 20px; }
        .imessage-icon { width: 42px; height: 42px; background: #fff; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #ffafbd; font-weight: 900; font-size: 10px; }
        .imessage-content { flex: 1; }
        .imessage-header { display: flex; justify-content: space-between; font-size: 10px; text-transform: uppercase; font-weight: bold; color: rgba(0,0,0,0.4); }
        .imessage-body { font-size: 13px; color: #000; font-weight: 500; line-height: 1.3; }
        .imessage-footer { font-size: 9px; color: #000; opacity: 0.5; margin-top: 5px; font-weight: 700; text-transform: uppercase; }
        #cover { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--cover-bg); z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 60px 20px; box-sizing: border-box; transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: left center; box-shadow: inset -5px 0 10px rgba(0,0,0,0.1), 10px 0 30px rgba(0,0,0,0.2); cursor: pointer; }
        #cover.opened { transform: rotateY(-115deg); pointer-events: none; }
        .turn-page-hint { position: absolute; right: 25px; top: 50%; transform: translateY(-50%); writing-mode: vertical-rl; text-transform: uppercase; font-size: 10px; letter-spacing: 3px; opacity: 0.5; font-weight: 600; }
        #main-content { padding: 40px 20px; min-height: 100vh; background-color: var(--page-bg); opacity: 0; transition: opacity 0.5s; }
        .visible { opacity: 1 !important; }
        .top-menu { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .tools-right { display: flex; gap: 15px; }
        .stats-container { display: flex; gap: 15px; margin-bottom: 30px; }
        .stat-card { flex: 1; padding: 20px; border-radius: 12px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.05); background-size: cover; background-position: center; position: relative; overflow: hidden; }
        .stat-card span { display: block; font-size: 24px; font-weight: bold; margin-bottom: 5px; position: relative; z-index: 2; }
        .stat-card label { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; opacity: 0.7; position: relative; z-index: 2; }
        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px; border-radius: 20px; z-index: 10001; width: 340px; }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.2); z-index: 10000; backdrop-filter: blur(2px); }
        .palette-grid { display: grid; grid-template-columns: repeat(8, 1fr); gap: 8px; }
        .color-dot { width: 32px; height: 32px; border-radius: 50%; cursor: pointer; border: 1px solid #eee; }
        .paper-opt { height: 45px; border: 1px solid #eee; margin-bottom: 8px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 10px; cursor: pointer; text-transform: uppercase; font-weight: bold; background: #fff; }
        .registre-title { font-family: 'Playfair Display', serif; font-size: 34px; font-style: italic; margin: 20px 0; }
        .table-container { background: rgba(255,255,255,0.3); border-radius: 15px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 1000px; }
        thead { background-color: var(--header-table-bg); }
        th { padding: 15px; text-align: left; font-size: 10px; text-transform: uppercase; letter-spacing: 1px; }
        td { padding: 12px 15px; border-bottom: 1px solid rgba(0,0,0,0.05); }
        input, select { border: 1px solid rgba(0,0,0,0.1); background: white; padding: 8px; border-radius: 4px; width: 100%; font-family: inherit; }
        .btn-cal { background: #000; color: #fff; border: none; padding: 6px 10px; font-size: 9px; border-radius: 4px; cursor: pointer; text-transform: uppercase; font-weight: bold; }
        .btn-mail { background: #007AFF; color: #fff; border: none; padding: 6px 10px; font-size: 9px; border-radius: 4px; cursor: pointer; text-transform: uppercase; font-weight: bold; }
        .copyright { text-align: center; font-size: 9px; color: rgba(0,0,0,0.4); margin-top: 60px; letter-spacing: 3px; text-transform: uppercase; }
        .urgent-relance { color: #d63031; font-weight: 800; font-size: 11px; }
        .time-picker { font-size: 10px; width: 85px !important; margin-right: 5px; }
    </style>
</head>
<body>
    <div class="grain"></div>
    <div id="overlay" onclick="_0x4f2a('overlay','none')"></div>
    <div id="imessage-notif" onclick="this.classList.remove('show')">
        <div class="imessage-icon">S≈åMA</div>
        <div class="imessage-content">
            <div class="imessage-header"><span>Messages</span><span>Maintenant</span></div>
            <div class="imessage-body" id="imessage-text"></div>
            <div class="imessage-footer">fondatrice S≈çma</div>
        </div>
    </div>
    <div id="zoneModal" class="modal">
        <p style="font-size: 10px; text-transform: uppercase; letter-spacing: 1px; font-weight: bold;">Personnalisation</p>
        <button onclick="_0x9a3('cover')" style="width:100%; padding:10px; margin-bottom:5px;">Couverture</button>
        <button onclick="_0x9a3('page')" style="width:100%; padding:10px; margin-bottom:5px;">Fond de Page</button>
        <button onclick="_0x9a3('header')" style="width:100%; padding:10px; margin-bottom:10px;">Header Tableau</button>
        <div style="display:flex; gap:5px;">
            <button onclick="_0x9a3('stat-envoye')" style="flex:1; padding:8px; font-size:9px;">Envoy√©s</button>
            <button onclick="_0x9a3('stat-attente')" style="flex:1; padding:8px; font-size:9px;">Attente</button>
            <button onclick="_0x9a3('stat-trouve')" style="flex:1; padding:8px; font-size:9px;">Trouv√©</button>
        </div>
    </div>
    <div id="colorModal" class="modal"><p id="paletteTitle" style="font-size: 10px; text-transform: uppercase; letter-spacing: 1px; font-weight: bold; margin-bottom:15px;"></p><div class="palette-grid" id="paletteGrid"></div></div>
    <div id="paperModal" class="modal"><p style="font-size: 10px; text-transform: uppercase; letter-spacing: 1px; font-weight: bold;">Style du Papier</p><div class="paper-opt" onclick="_0x8b2('paper-uni')">Uni Minimaliste</div><div class="paper-opt paper-grid" onclick="_0x8b2('paper-grid')">Petit Carreaux</div><div class="paper-opt paper-lines" onclick="_0x8b2('paper-lines')">Lign√© Classique</div></div>

    <div id="book-wrapper">
        <div id="cover" onclick="_0x1a2()">
            <div style="font-family: 'Playfair Display', serif; font-size: 40px; letter-spacing: 4px; margin-top: 10vh; text-align:center;">Suivi de candidature</div>
            <div class="user-info" onclick="event.stopPropagation()"><input type="text" id="userName" oninput="_0x7c1()" placeholder="PR√âNOM ET NOM" style="border:none; border-bottom:1px solid #000; text-align: center; font-size: 16px; width: 280px; background: transparent;"></div>
            <div class="turn-page-hint">Tourner la page ‚Üí</div>
            <div style="font-size: 26px; letter-spacing: 8px; font-weight: 300;">S≈åMA</div>
        </div>
        <div id="main-content">
            <div class="top-menu">
                <button onclick="_0x2b3()" style="background:none; border:1px solid #000; padding:8px 18px; cursor:pointer; font-size:10px; text-transform:uppercase; border-radius:25px; font-weight:bold;">Refermer</button>
                <div class="tools-right">
                    <input type="file" id="bgPicker" style="display:none" accept="image/*" onchange="_0x5d4(this)">
                    <div onclick="document.getElementById('bgPicker').click()" style="cursor:pointer; text-align:center;"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg><div style="font-size:8px; font-weight:bold">IMAGE</div></div>
                    <div onclick="_0x3e5()" style="cursor:pointer; text-align:center;"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="1.5"><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg><div style="font-size:8px; font-weight:bold">CLEAR</div></div>
                    <div onclick="_0x4f6()" style="cursor:pointer; text-align:center;"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#d63031" stroke-width="1.5"><path d="M3 6h18"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg><div style="font-size:8px; font-weight:bold; color:#d63031">RESET</div></div>
                    <div onclick="_0x5a1('paperModal')" style="cursor:pointer; text-align:center;"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg><div style="font-size:8px; font-weight:bold">PAPIER</div></div>
                    <div onclick="_0x5a1('zoneModal')" style="cursor:pointer; text-align:center;"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="1.5"><path d="M12 19l7-7 3 3-7 7-3-3zM18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path></svg><div style="font-size:8px; font-weight:bold">COULEURS</div></div>
                </div>
            </div>
            <h1 class="registre-title">Registre de Prospection</h1>
            <div class="stats-container">
                <div id="card-envoye" class="stat-card" style="background-color: var(--stat-envoye-bg);"><span id="statEnvoye">0</span><label>Envoy√©es</label></div>
                <div id="card-attente" class="stat-card" style="background-color: var(--stat-attente-bg);"><span id="statAttente">0</span><label>Attente</label></div>
                <div id="card-trouve" class="stat-card" style="background-color: var(--stat-trouve-bg);"><span id="statTrouve">0</span><label>Trouv√©</label></div>
            </div>
            <div class="table-container"><table><thead><tr><th>√âtablissement</th><th>Adresse</th><th>Date d'envoi</th><th>Relance (J+10)</th><th>R√©ponse</th><th>Actions</th></tr></thead><tbody id="tableBody"></tbody></table></div>
            <button onclick="_0x6f7()" style="margin-top:20px; padding:12px 25px; background:#000; color:#fff; border-radius:30px; cursor:pointer; font-size:10px; font-weight:bold;">+ Nouvelle Ligne</button>
            <div class="copyright">Copyright S≈çma ¬© 2026</div>
        </div>
    </div>

    <script>
        /** * SOMA CORE - PROTECTED SOURCE 
         * Redistribution or resale is strictly prohibited.
         */
        const _0x1f2=JSON.parse(localStorage.getItem('soma_vFinal'))||[];let _0x2a3='';
        const _0xcolors=["#E1E3E3","#DFD8D5","#D8D5D2","#E6D4C4","#BAB1B0","#898684","#F2F8F8","#C3CED1","#B1A6A6","#B0AEB4","#A2A09A","#6F6869","#E8E7E7","#EEE9E9","#D5C7B3","#E2D7D4","#B0A19F","#C09D89","#D0CFCD","#E9F0F0","#E4DDD4","#B1B6AF","#D7D8D2","#B6AD9E","#DFE5E5","#E4E9EC","#B8BFBA","#8F877F","#859A9E","#BDD2E0","#F8FCFD","#E9EDEE","#CFCFD4","#E2DFD7","#E2D5D5","#DED0C7","#F6F2F0","#D4C1BA","#D0C9CB","#C1B2B1"];
        
        function _0x7c1(){localStorage.setItem('soma_userName',document.getElementById('userName').value)}
        function _0x1a2(){document.getElementById('cover').classList.add('opened');document.getElementById('main-content').classList.add('visible')}
        function _0x2b3(){document.getElementById('cover').classList.remove('opened');document.getElementById('main-content').classList.remove('visible')}
        function _0x5a1(id){document.getElementById(id).style.display='block';document.getElementById('overlay').style.display='block'}
        function _0x4f2a(id,s){document.querySelectorAll('.modal').forEach(m=>m.style.display=s);document.getElementById(id).style.display=s}
        function closeModals(){_0x4f2a('overlay','none')}
        
        function _0x9a3(z){_0x2a3=z;document.getElementById('zoneModal').style.display='none';document.getElementById('paletteTitle').innerText="Color: "+z;document.getElementById('colorModal').style.display='block'}
        
        const g=document.getElementById('paletteGrid');
        _0xcolors.forEach(c=>{const d=document.createElement('div');d.className='color-dot';d.style.background=c;d.onclick=()=>{document.documentElement.style.setProperty('--'+_0x2a3+(_0x2a3==='header'?'-table':'')+'-bg',c);localStorage.setItem('soma_'+_0x2a3,c);closeModals()};g.appendChild(d)});

        function _0x5d4(i){if(i.files&&i.files[0]){const r=new FileReader();r.onload=e=>{const u=e.target.result;document.querySelectorAll('.stat-card').forEach(c=>c.style.backgroundImage=`url(${u})`);localStorage.setItem('soma_module_bg',u)};r.readAsDataURL(i.files[0])}}
        function _0x3e5(){document.querySelectorAll('.stat-card').forEach(c=>c.style.backgroundImage='none');localStorage.removeItem('soma_module_bg')}
        function _0x8b2(s){document.getElementById('main-content').className='visible '+s;localStorage.setItem('soma_paper',s);closeModals()}
        function _0x6f7(){_0x1f2.push({id:Date.now(),nom:"",lieu:"",date:"",reponse:"Attente",time:"09:00"});_0xrender()}
        function _0x4f6(){if(confirm("RESET TOTAL?")){localStorage.clear();location.reload()}}

        function _0xrender(){
            const b=document.getElementById('tableBody');b.innerHTML="";
            _0x1f2.forEach((c,i)=>{
                const r=document.createElement('tr');
                r.innerHTML=`<td><input type="text" value="${c.nom}" oninput="_0xup(${i},'nom',this.value)" placeholder="Nom"></td>
                <td><input type="text" value="${c.lieu||''}" oninput="_0xup(${i},'lieu',this.value)" placeholder="Adresse"></td>
                <td><input type="date" value="${c.date}" onchange="_0xup(${i},'date',this.value,true)"></td>
                <td id="relance-${i}">${_0xcalc(c.date,c.reponse,c.nom)}</td>
                <td><select onchange="_0xup(${i},'reponse',this.value,true)"><option value="Attente" ${c.reponse==='Attente'?'selected':''}>Attente</option><option value="Oui" ${c.reponse==='Oui'?'selected':''}>OUI</option><option value="Non" ${c.reponse==='Non'?'selected':''}>NON</option></select></td>
                <td><div style="display:flex;align-items:center;"><button class="btn-mail" onclick="_0xmail('${c.nom}')">‚úâÔ∏è MAIL</button><input type="time" class="time-picker" value="${c.time||'09:00'}" onchange="_0xup(${i},'time',this.value)"><button class="btn-cal" onclick="_0xcalen(${i})">üîî CAL</button></div></td>`;
                b.appendChild(r);
            });
            _0xstats();
        }

        function _0xup(i,k,v,f=false){_0x1f2[i][k]=v;localStorage.setItem('soma_vFinal',JSON.stringify(_0x1f2));if(f){_0xrender()}else{document.getElementById('relance-'+i).innerHTML=_0xcalc(_0x1f2[i].date,_0x1f2[i].reponse,_0x1f2[i].nom);_0xstats()}}
        function _0xstats(){document.getElementById('statEnvoye').innerText=_0x1f2.length;document.getElementById('statAttente').innerText=_0x1f2.filter(c=>c.reponse==="Attente").length;document.getElementById('statTrouve').innerText=_0x1f2.filter(c=>c.reponse==="Oui").length}
        function _0xmail(n){const u=document.getElementById('userName').value||"Candidat";const s=encodeURIComponent(`Relance : Candidature de stage ‚Äì ${u} ‚Äì ${n}`);window.location.href=`mailto:?subject=${s}`}
        function _0xcalc(d,s,n){if(!d||s!=="Attente")return "-";let r=new Date(d);r.setDate(r.getDate()+10);let t=new Date();t.setHours(0,0,0,0);if(t>r){_0xnotif(n);return `<span class="urgent-relance">√Ä RELANCER (${r.toLocaleDateString('fr-FR')})</span>`}return r.toLocaleDateString('fr-FR')}
        function _0xnotif(n){document.getElementById('imessage-text').innerText=`Relance oubli√©e pour ${n}`;document.getElementById('imessage-notif').classList.add('show')}
        function _0xcalen(i){const c=_0x1f2[i];if(!c.date)return;let d=new Date(c.date);d.setDate(d.getDate()+10);const [h,m]=(c.time||"09:00").split(':');d.setHours(parseInt(h),parseInt(m),0);const f=x=>x.toISOString().replace(/-|:|\.\d+/g,"");const e=new Date(d.getTime()+30*60000);const ics=`BEGIN:VCALENDAR\nVERSION:2.0\nBEGIN:VEVENT\nDTSTART:${f(d)}\nDTEND:${f(e)}\nSUMMARY:Relance Stage: ${c.nom}\nEND:VEVENT\nEND:VCALENDAR`;const l=document.createElement('a');l.href=URL.createObjectURL(new Blob([ics],{type:'text/calendar'}));l.download=`relance.ics`;l.click()}

        const sn=localStorage.getItem('soma_userName');if(sn)document.getElementById('userName').value=sn;
        const sbg=localStorage.getItem('soma_module_bg');if(sbg)document.querySelectorAll('.stat-card').forEach(c=>c.style.backgroundImage=`url(${sbg})`);
        ['cover','page','header','stat-envoye','stat-attente','stat-trouve'].forEach(z=>{const s=localStorage.getItem('soma_'+z);if(s)document.documentElement.style.setProperty('--'+z+(z==='header'?'-table':'')+'-bg',s)});
        const sp=localStorage.getItem('soma_paper');if(sp)_0x8b2(sp);
        _0xrender();
    </script>
</body>
</html>
